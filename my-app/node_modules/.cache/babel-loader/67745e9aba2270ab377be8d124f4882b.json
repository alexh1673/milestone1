{"ast":null,"code":"/**\n * Common functions and function call helpers.\n *\n * @module function\n */\n\nimport * as array from './array.js';\nimport * as object from './object.js';\n\n/**\n * Calls all functions in `fs` with args. Only throws after all functions were called.\n *\n * @param {Array<function>} fs\n * @param {Array<any>} args\n */\nexport const callAll = function (fs, args) {\n  let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  try {\n    for (; i < fs.length; i++) {\n      fs[i](...args);\n    }\n  } finally {\n    if (i < fs.length) {\n      callAll(fs, args, i + 1);\n    }\n  }\n};\nexport const nop = () => {};\n\n/**\n * @template T\n * @param {function():T} f\n * @return {T}\n */\nexport const apply = f => f();\n\n/**\n * @template A\n *\n * @param {A} a\n * @return {A}\n */\nexport const id = a => a;\n\n/**\n * @template T\n *\n * @param {T} a\n * @param {T} b\n * @return {boolean}\n */\nexport const equalityStrict = (a, b) => a === b;\n\n/**\n * @template T\n *\n * @param {Array<T>|object} a\n * @param {Array<T>|object} b\n * @return {boolean}\n */\nexport const equalityFlat = (a, b) => a === b || a != null && b != null && a.constructor === b.constructor && (a instanceof Array && array.equalFlat(a, /** @type {Array<T>} */b) || typeof a === 'object' && object.equalFlat(a, b));\n\n/**\n * @param {any} a\n * @param {any} b\n * @return {boolean}\n */\nexport const equalityDeep = (a, b) => {\n  if (a == null || b == null) {\n    return equalityStrict(a, b);\n  }\n  if (a.constructor !== b.constructor) {\n    return false;\n  }\n  if (a === b) {\n    return true;\n  }\n  switch (a.constructor) {\n    case ArrayBuffer:\n      a = new Uint8Array(a);\n      b = new Uint8Array(b);\n    // eslint-disable-next-line no-fallthrough\n    case Uint8Array:\n      {\n        if (a.byteLength !== b.byteLength) {\n          return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n          if (a[i] !== b[i]) {\n            return false;\n          }\n        }\n        break;\n      }\n    case Set:\n      {\n        if (a.size !== b.size) {\n          return false;\n        }\n        for (const value of a) {\n          if (!b.has(value)) {\n            return false;\n          }\n        }\n        break;\n      }\n    case Map:\n      {\n        if (a.size !== b.size) {\n          return false;\n        }\n        for (const key of a.keys()) {\n          if (!b.has(key) || !equalityDeep(a.get(key), b.get(key))) {\n            return false;\n          }\n        }\n        break;\n      }\n    case Object:\n      if (object.length(a) !== object.length(b)) {\n        return false;\n      }\n      for (const key in a) {\n        if (!object.hasProperty(a, key) || !equalityDeep(a[key], b[key])) {\n          return false;\n        }\n      }\n      break;\n    case Array:\n      if (a.length !== b.length) {\n        return false;\n      }\n      for (let i = 0; i < a.length; i++) {\n        if (!equalityDeep(a[i], b[i])) {\n          return false;\n        }\n      }\n      break;\n    default:\n      return false;\n  }\n  return true;\n};","map":{"version":3,"names":["array","object","callAll","fs","args","i","length","nop","apply","f","id","a","equalityStrict","b","equalityFlat","constructor","Array","equalFlat","equalityDeep","ArrayBuffer","Uint8Array","byteLength","Set","size","value","has","Map","key","keys","get","Object","hasProperty"],"sources":["/root/ms1/my-app/node_modules/lib0/function.js"],"sourcesContent":["/**\n * Common functions and function call helpers.\n *\n * @module function\n */\n\nimport * as array from './array.js'\nimport * as object from './object.js'\n\n/**\n * Calls all functions in `fs` with args. Only throws after all functions were called.\n *\n * @param {Array<function>} fs\n * @param {Array<any>} args\n */\nexport const callAll = (fs, args, i = 0) => {\n  try {\n    for (; i < fs.length; i++) {\n      fs[i](...args)\n    }\n  } finally {\n    if (i < fs.length) {\n      callAll(fs, args, i + 1)\n    }\n  }\n}\n\nexport const nop = () => {}\n\n/**\n * @template T\n * @param {function():T} f\n * @return {T}\n */\nexport const apply = f => f()\n\n/**\n * @template A\n *\n * @param {A} a\n * @return {A}\n */\nexport const id = a => a\n\n/**\n * @template T\n *\n * @param {T} a\n * @param {T} b\n * @return {boolean}\n */\nexport const equalityStrict = (a, b) => a === b\n\n/**\n * @template T\n *\n * @param {Array<T>|object} a\n * @param {Array<T>|object} b\n * @return {boolean}\n */\nexport const equalityFlat = (a, b) => a === b || (a != null && b != null && a.constructor === b.constructor && ((a instanceof Array && array.equalFlat(a, /** @type {Array<T>} */ (b))) || (typeof a === 'object' && object.equalFlat(a, b))))\n\n/**\n * @param {any} a\n * @param {any} b\n * @return {boolean}\n */\nexport const equalityDeep = (a, b) => {\n  if (a == null || b == null) {\n    return equalityStrict(a, b)\n  }\n  if (a.constructor !== b.constructor) {\n    return false\n  }\n  if (a === b) {\n    return true\n  }\n  switch (a.constructor) {\n    case ArrayBuffer:\n      a = new Uint8Array(a)\n      b = new Uint8Array(b)\n    // eslint-disable-next-line no-fallthrough\n    case Uint8Array: {\n      if (a.byteLength !== b.byteLength) {\n        return false\n      }\n      for (let i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) {\n          return false\n        }\n      }\n      break\n    }\n    case Set: {\n      if (a.size !== b.size) {\n        return false\n      }\n      for (const value of a) {\n        if (!b.has(value)) {\n          return false\n        }\n      }\n      break\n    }\n    case Map: {\n      if (a.size !== b.size) {\n        return false\n      }\n      for (const key of a.keys()) {\n        if (!b.has(key) || !equalityDeep(a.get(key), b.get(key))) {\n          return false\n        }\n      }\n      break\n    }\n    case Object:\n      if (object.length(a) !== object.length(b)) {\n        return false\n      }\n      for (const key in a) {\n        if (!object.hasProperty(a, key) || !equalityDeep(a[key], b[key])) {\n          return false\n        }\n      }\n      break\n    case Array:\n      if (a.length !== b.length) {\n        return false\n      }\n      for (let i = 0; i < a.length; i++) {\n        if (!equalityDeep(a[i], b[i])) {\n          return false\n        }\n      }\n      break\n    default:\n      return false\n  }\n  return true\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,OAAO,KAAKA,KAAK,MAAM,YAAY;AACnC,OAAO,KAAKC,MAAM,MAAM,aAAa;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,OAAO,GAAG,UAACC,EAAE,EAAEC,IAAI,EAAY;EAAA,IAAVC,CAAC,uEAAG,CAAC;EACrC,IAAI;IACF,OAAOA,CAAC,GAAGF,EAAE,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;MACzBF,EAAE,CAACE,CAAC,CAAC,CAAC,GAAGD,IAAI,CAAC;IAChB;EACF,CAAC,SAAS;IACR,IAAIC,CAAC,GAAGF,EAAE,CAACG,MAAM,EAAE;MACjBJ,OAAO,CAACC,EAAE,EAAEC,IAAI,EAAEC,CAAC,GAAG,CAAC,CAAC;IAC1B;EACF;AACF,CAAC;AAED,OAAO,MAAME,GAAG,GAAG,MAAM,CAAC,CAAC;;AAE3B;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,KAAK,GAAGC,CAAC,IAAIA,CAAC,EAAE;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,EAAE,GAAGC,CAAC,IAAIA,CAAC;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,cAAc,GAAG,CAACD,CAAC,EAAEE,CAAC,KAAKF,CAAC,KAAKE,CAAC;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,YAAY,GAAG,CAACH,CAAC,EAAEE,CAAC,KAAKF,CAAC,KAAKE,CAAC,IAAKF,CAAC,IAAI,IAAI,IAAIE,CAAC,IAAI,IAAI,IAAIF,CAAC,CAACI,WAAW,KAAKF,CAAC,CAACE,WAAW,KAAMJ,CAAC,YAAYK,KAAK,IAAIhB,KAAK,CAACiB,SAAS,CAACN,CAAC,EAAE,uBAAyBE,CAAC,CAAE,IAAM,OAAOF,CAAC,KAAK,QAAQ,IAAIV,MAAM,CAACgB,SAAS,CAACN,CAAC,EAAEE,CAAC,CAAE,CAAE;;AAE9O;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMK,YAAY,GAAG,CAACP,CAAC,EAAEE,CAAC,KAAK;EACpC,IAAIF,CAAC,IAAI,IAAI,IAAIE,CAAC,IAAI,IAAI,EAAE;IAC1B,OAAOD,cAAc,CAACD,CAAC,EAAEE,CAAC,CAAC;EAC7B;EACA,IAAIF,CAAC,CAACI,WAAW,KAAKF,CAAC,CAACE,WAAW,EAAE;IACnC,OAAO,KAAK;EACd;EACA,IAAIJ,CAAC,KAAKE,CAAC,EAAE;IACX,OAAO,IAAI;EACb;EACA,QAAQF,CAAC,CAACI,WAAW;IACnB,KAAKI,WAAW;MACdR,CAAC,GAAG,IAAIS,UAAU,CAACT,CAAC,CAAC;MACrBE,CAAC,GAAG,IAAIO,UAAU,CAACP,CAAC,CAAC;IACvB;IACA,KAAKO,UAAU;MAAE;QACf,IAAIT,CAAC,CAACU,UAAU,KAAKR,CAAC,CAACQ,UAAU,EAAE;UACjC,OAAO,KAAK;QACd;QACA,KAAK,IAAIhB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGM,CAAC,CAACL,MAAM,EAAED,CAAC,EAAE,EAAE;UACjC,IAAIM,CAAC,CAACN,CAAC,CAAC,KAAKQ,CAAC,CAACR,CAAC,CAAC,EAAE;YACjB,OAAO,KAAK;UACd;QACF;QACA;MACF;IACA,KAAKiB,GAAG;MAAE;QACR,IAAIX,CAAC,CAACY,IAAI,KAAKV,CAAC,CAACU,IAAI,EAAE;UACrB,OAAO,KAAK;QACd;QACA,KAAK,MAAMC,KAAK,IAAIb,CAAC,EAAE;UACrB,IAAI,CAACE,CAAC,CAACY,GAAG,CAACD,KAAK,CAAC,EAAE;YACjB,OAAO,KAAK;UACd;QACF;QACA;MACF;IACA,KAAKE,GAAG;MAAE;QACR,IAAIf,CAAC,CAACY,IAAI,KAAKV,CAAC,CAACU,IAAI,EAAE;UACrB,OAAO,KAAK;QACd;QACA,KAAK,MAAMI,GAAG,IAAIhB,CAAC,CAACiB,IAAI,EAAE,EAAE;UAC1B,IAAI,CAACf,CAAC,CAACY,GAAG,CAACE,GAAG,CAAC,IAAI,CAACT,YAAY,CAACP,CAAC,CAACkB,GAAG,CAACF,GAAG,CAAC,EAAEd,CAAC,CAACgB,GAAG,CAACF,GAAG,CAAC,CAAC,EAAE;YACxD,OAAO,KAAK;UACd;QACF;QACA;MACF;IACA,KAAKG,MAAM;MACT,IAAI7B,MAAM,CAACK,MAAM,CAACK,CAAC,CAAC,KAAKV,MAAM,CAACK,MAAM,CAACO,CAAC,CAAC,EAAE;QACzC,OAAO,KAAK;MACd;MACA,KAAK,MAAMc,GAAG,IAAIhB,CAAC,EAAE;QACnB,IAAI,CAACV,MAAM,CAAC8B,WAAW,CAACpB,CAAC,EAAEgB,GAAG,CAAC,IAAI,CAACT,YAAY,CAACP,CAAC,CAACgB,GAAG,CAAC,EAAEd,CAAC,CAACc,GAAG,CAAC,CAAC,EAAE;UAChE,OAAO,KAAK;QACd;MACF;MACA;IACF,KAAKX,KAAK;MACR,IAAIL,CAAC,CAACL,MAAM,KAAKO,CAAC,CAACP,MAAM,EAAE;QACzB,OAAO,KAAK;MACd;MACA,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGM,CAAC,CAACL,MAAM,EAAED,CAAC,EAAE,EAAE;QACjC,IAAI,CAACa,YAAY,CAACP,CAAC,CAACN,CAAC,CAAC,EAAEQ,CAAC,CAACR,CAAC,CAAC,CAAC,EAAE;UAC7B,OAAO,KAAK;QACd;MACF;MACA;IACF;MACE,OAAO,KAAK;EAAA;EAEhB,OAAO,IAAI;AACb,CAAC"},"metadata":{},"sourceType":"module"}