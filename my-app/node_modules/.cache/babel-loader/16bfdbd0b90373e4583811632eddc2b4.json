{"ast":null,"code":"/**\n * Utility module to create and manipulate Iterators.\n *\n * @module iterator\n */\n\n/**\n * @template T,R\n * @param {Iterator<T>} iterator\n * @param {function(T):R} f\n * @return {IterableIterator<R>}\n */\nexport const mapIterator = (iterator, f) => ({\n  [Symbol.iterator]() {\n    return this;\n  },\n  // @ts-ignore\n  next() {\n    const r = iterator.next();\n    return {\n      value: r.done ? undefined : f(r.value),\n      done: r.done\n    };\n  }\n});\n\n/**\n * @template T\n * @param {function():IteratorResult<T>} next\n * @return {IterableIterator<T>}\n */\nexport const createIterator = next => ({\n  /**\n   * @return {IterableIterator<T>}\n   */\n  [Symbol.iterator]() {\n    return this;\n  },\n  // @ts-ignore\n  next\n});\n\n/**\n * @template T\n * @param {Iterator<T>} iterator\n * @param {function(T):boolean} filter\n */\nexport const iteratorFilter = (iterator, filter) => createIterator(() => {\n  let res;\n  do {\n    res = iterator.next();\n  } while (!res.done && !filter(res.value));\n  return res;\n});\n\n/**\n * @template T,M\n * @param {Iterator<T>} iterator\n * @param {function(T):M} fmap\n */\nexport const iteratorMap = (iterator, fmap) => createIterator(() => {\n  const {\n    done,\n    value\n  } = iterator.next();\n  return {\n    done,\n    value: done ? undefined : fmap(value)\n  };\n});","map":{"version":3,"names":["mapIterator","iterator","f","Symbol","next","r","value","done","undefined","createIterator","iteratorFilter","filter","res","iteratorMap","fmap"],"sources":["/root/ms1/node_modules/lib0/iterator.js"],"sourcesContent":["/**\n * Utility module to create and manipulate Iterators.\n *\n * @module iterator\n */\n\n/**\n * @template T,R\n * @param {Iterator<T>} iterator\n * @param {function(T):R} f\n * @return {IterableIterator<R>}\n */\nexport const mapIterator = (iterator, f) => ({\n  [Symbol.iterator] () {\n    return this\n  },\n  // @ts-ignore\n  next () {\n    const r = iterator.next()\n    return { value: r.done ? undefined : f(r.value), done: r.done }\n  }\n})\n\n/**\n * @template T\n * @param {function():IteratorResult<T>} next\n * @return {IterableIterator<T>}\n */\nexport const createIterator = next => ({\n  /**\n   * @return {IterableIterator<T>}\n   */\n  [Symbol.iterator] () {\n    return this\n  },\n  // @ts-ignore\n  next\n})\n\n/**\n * @template T\n * @param {Iterator<T>} iterator\n * @param {function(T):boolean} filter\n */\nexport const iteratorFilter = (iterator, filter) => createIterator(() => {\n  let res\n  do {\n    res = iterator.next()\n  } while (!res.done && !filter(res.value))\n  return res\n})\n\n/**\n * @template T,M\n * @param {Iterator<T>} iterator\n * @param {function(T):M} fmap\n */\nexport const iteratorMap = (iterator, fmap) => createIterator(() => {\n  const { done, value } = iterator.next()\n  return { done, value: done ? undefined : fmap(value) }\n})\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,WAAW,GAAG,CAACC,QAAQ,EAAEC,CAAC,MAAM;EAC3C,CAACC,MAAM,CAACF,QAAQ,IAAK;IACnB,OAAO,IAAI;EACb,CAAC;EACD;EACAG,IAAI,GAAI;IACN,MAAMC,CAAC,GAAGJ,QAAQ,CAACG,IAAI,EAAE;IACzB,OAAO;MAAEE,KAAK,EAAED,CAAC,CAACE,IAAI,GAAGC,SAAS,GAAGN,CAAC,CAACG,CAAC,CAACC,KAAK,CAAC;MAAEC,IAAI,EAAEF,CAAC,CAACE;IAAK,CAAC;EACjE;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA,OAAO,MAAME,cAAc,GAAGL,IAAI,KAAK;EACrC;AACF;AACA;EACE,CAACD,MAAM,CAACF,QAAQ,IAAK;IACnB,OAAO,IAAI;EACb,CAAC;EACD;EACAG;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMM,cAAc,GAAG,CAACT,QAAQ,EAAEU,MAAM,KAAKF,cAAc,CAAC,MAAM;EACvE,IAAIG,GAAG;EACP,GAAG;IACDA,GAAG,GAAGX,QAAQ,CAACG,IAAI,EAAE;EACvB,CAAC,QAAQ,CAACQ,GAAG,CAACL,IAAI,IAAI,CAACI,MAAM,CAACC,GAAG,CAACN,KAAK,CAAC;EACxC,OAAOM,GAAG;AACZ,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,WAAW,GAAG,CAACZ,QAAQ,EAAEa,IAAI,KAAKL,cAAc,CAAC,MAAM;EAClE,MAAM;IAAEF,IAAI;IAAED;EAAM,CAAC,GAAGL,QAAQ,CAACG,IAAI,EAAE;EACvC,OAAO;IAAEG,IAAI;IAAED,KAAK,EAAEC,IAAI,GAAGC,SAAS,GAAGM,IAAI,CAACR,KAAK;EAAE,CAAC;AACxD,CAAC,CAAC"},"metadata":{},"sourceType":"module"}