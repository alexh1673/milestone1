{"ast":null,"code":"/**\n * Isomorphic module to work access the environment (query params, env variables).\n *\n * @module map\n */\n\nimport * as map from './map.js';\nimport * as string from './string.js';\nimport * as conditions from './conditions.js';\nimport * as storage from './storage.js';\n\n/* istanbul ignore next */\n// @ts-ignore\nexport const isNode = typeof process !== 'undefined' && process.release && /node|io\\.js/.test(process.release.name);\n/* istanbul ignore next */\nexport const isBrowser = typeof window !== 'undefined' && !isNode;\n/* istanbul ignore next */\nexport const isMac = typeof navigator !== 'undefined' ? /Mac/.test(navigator.platform) : false;\n\n/**\n * @type {Map<string,string>}\n */\nlet params;\nconst args = [];\n\n/* istanbul ignore next */\nconst computeParams = () => {\n  if (params === undefined) {\n    if (isNode) {\n      params = map.create();\n      const pargs = process.argv;\n      let currParamName = null;\n      /* istanbul ignore next */\n      for (let i = 0; i < pargs.length; i++) {\n        const parg = pargs[i];\n        if (parg[0] === '-') {\n          if (currParamName !== null) {\n            params.set(currParamName, '');\n          }\n          currParamName = parg;\n        } else {\n          if (currParamName !== null) {\n            params.set(currParamName, parg);\n            currParamName = null;\n          } else {\n            args.push(parg);\n          }\n        }\n      }\n      if (currParamName !== null) {\n        params.set(currParamName, '');\n      }\n      // in ReactNative for example this would not be true (unless connected to the Remote Debugger)\n    } else if (typeof location === 'object') {\n      params = map.create()\n      // eslint-disable-next-line no-undef\n      ;\n      (location.search || '?').slice(1).split('&').forEach(kv => {\n        if (kv.length !== 0) {\n          const [key, value] = kv.split('=');\n          params.set(`--${string.fromCamelCase(key, '-')}`, value);\n          params.set(`-${string.fromCamelCase(key, '-')}`, value);\n        }\n      });\n    } else {\n      params = map.create();\n    }\n  }\n  return params;\n};\n\n/**\n * @param {string} name\n * @return {boolean}\n */\n/* istanbul ignore next */\nexport const hasParam = name => computeParams().has(name);\n\n/**\n * @param {string} name\n * @param {string} defaultVal\n * @return {string}\n */\n/* istanbul ignore next */\nexport const getParam = (name, defaultVal) => computeParams().get(name) || defaultVal;\n// export const getArgs = name => computeParams() && args\n\n/**\n * @param {string} name\n * @return {string|null}\n */\n/* istanbul ignore next */\nexport const getVariable = name => isNode ? conditions.undefinedToNull(process.env[name.toUpperCase()]) : conditions.undefinedToNull(storage.varStorage.getItem(name));\n\n/**\n * @param {string} name\n * @return {string|null}\n */\nexport const getConf = name => computeParams().get('--' + name) || getVariable(name);\n\n/**\n * @param {string} name\n * @return {boolean}\n */\n/* istanbul ignore next */\nexport const hasConf = name => hasParam('--' + name) || getVariable(name) !== null;\n\n/* istanbul ignore next */\nexport const production = hasConf('production');","map":{"version":3,"names":["map","string","conditions","storage","isNode","process","release","test","name","isBrowser","window","isMac","navigator","platform","params","args","computeParams","undefined","create","pargs","argv","currParamName","i","length","parg","set","push","location","search","slice","split","forEach","kv","key","value","fromCamelCase","hasParam","has","getParam","defaultVal","get","getVariable","undefinedToNull","env","toUpperCase","varStorage","getItem","getConf","hasConf","production"],"sources":["/root/ms1/node_modules/lib0/environment.js"],"sourcesContent":["/**\n * Isomorphic module to work access the environment (query params, env variables).\n *\n * @module map\n */\n\nimport * as map from './map.js'\nimport * as string from './string.js'\nimport * as conditions from './conditions.js'\nimport * as storage from './storage.js'\n\n/* istanbul ignore next */\n// @ts-ignore\nexport const isNode = typeof process !== 'undefined' && process.release && /node|io\\.js/.test(process.release.name)\n/* istanbul ignore next */\nexport const isBrowser = typeof window !== 'undefined' && !isNode\n/* istanbul ignore next */\nexport const isMac = typeof navigator !== 'undefined' ? /Mac/.test(navigator.platform) : false\n\n/**\n * @type {Map<string,string>}\n */\nlet params\nconst args = []\n\n/* istanbul ignore next */\nconst computeParams = () => {\n  if (params === undefined) {\n    if (isNode) {\n      params = map.create()\n      const pargs = process.argv\n      let currParamName = null\n      /* istanbul ignore next */\n      for (let i = 0; i < pargs.length; i++) {\n        const parg = pargs[i]\n        if (parg[0] === '-') {\n          if (currParamName !== null) {\n            params.set(currParamName, '')\n          }\n          currParamName = parg\n        } else {\n          if (currParamName !== null) {\n            params.set(currParamName, parg)\n            currParamName = null\n          } else {\n            args.push(parg)\n          }\n        }\n      }\n      if (currParamName !== null) {\n        params.set(currParamName, '')\n      }\n    // in ReactNative for example this would not be true (unless connected to the Remote Debugger)\n    } else if (typeof location === 'object') {\n      params = map.create()\n      // eslint-disable-next-line no-undef\n      ;(location.search || '?').slice(1).split('&').forEach(kv => {\n        if (kv.length !== 0) {\n          const [key, value] = kv.split('=')\n          params.set(`--${string.fromCamelCase(key, '-')}`, value)\n          params.set(`-${string.fromCamelCase(key, '-')}`, value)\n        }\n      })\n    } else {\n      params = map.create()\n    }\n  }\n  return params\n}\n\n/**\n * @param {string} name\n * @return {boolean}\n */\n/* istanbul ignore next */\nexport const hasParam = name => computeParams().has(name)\n\n/**\n * @param {string} name\n * @param {string} defaultVal\n * @return {string}\n */\n/* istanbul ignore next */\nexport const getParam = (name, defaultVal) => computeParams().get(name) || defaultVal\n// export const getArgs = name => computeParams() && args\n\n/**\n * @param {string} name\n * @return {string|null}\n */\n/* istanbul ignore next */\nexport const getVariable = name => isNode ? conditions.undefinedToNull(process.env[name.toUpperCase()]) : conditions.undefinedToNull(storage.varStorage.getItem(name))\n\n/**\n * @param {string} name\n * @return {string|null}\n */\nexport const getConf = name => computeParams().get('--' + name) || getVariable(name)\n\n/**\n * @param {string} name\n * @return {boolean}\n */\n/* istanbul ignore next */\nexport const hasConf = name => hasParam('--' + name) || getVariable(name) !== null\n\n/* istanbul ignore next */\nexport const production = hasConf('production')\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}